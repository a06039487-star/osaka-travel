<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Smart Travel Planner</title>

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
:root {
  --primary:#2563eb;
  --bg:#f5f7fb;
  --card:#fff;
  --text:#111827;
  --muted:#6b7280;
  --radius:14px;
}
body {
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  background:var(--bg);
  color:var(--text);
}
header {
  background:var(--primary);
  color:#fff;
  padding:16px;
  text-align:center;
}
main {
  max-width:720px;
  margin:auto;
  padding:16px;
}
.card {
  background:var(--card);
  border-radius:var(--radius);
  padding:16px;
  margin-bottom:16px;
}
input, select, textarea {
  width:100%;
  padding:12px;
  margin:6px 0 12px;
  border-radius:10px;
  border:1px solid #e5e7eb;
}
button {
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:var(--primary);
  color:#fff;
}
.lang {
  display:flex;
  gap:8px;
  justify-content:center;
}
.lang button {
  width:auto;
  padding:6px 10px;
  background:#1e40af;
}
#map { height:300px; border-radius:12px; }
.place { font-size:.9rem; }
</style>
</head>

<body>

<header>
  <h1 id="title">Smart Travel Planner</h1>
  <p id="subtitle">Plan trips, maps, routes & ideas in one place</p>
  <div class="lang">
    <button onclick="setLang('en')">EN</button>
    <button onclick="setLang('zh')">ä¸­</button>
    <button onclick="setLang('ja')">æ—¥</button>
  </div>
</header>

<main>

<div class="card">
  <h2 id="createTrip">Create Trip</h2>
  <input id="tripName" placeholder="Trip name">
  <input id="destination" placeholder="Osaka, Kyoto">
  <input type="date" id="start">
  <input type="date" id="end">
  <button onclick="generateTrip()">Generate AI Trip</button>
</div>

<div class="card">
  <h2>Places</h2>
  <input id="placeInput" placeholder="Add place (e.g. Osaka Castle)">
  <button onclick="addPlace()">Add Place</button>
  <div id="places"></div>
</div>

<div class="card">
  <h2>Map</h2>
  <div id="map"></div>
</div>

<div class="card">
  <h2>Share / Export</h2>
  <button onclick="exportTrip()">Export Trip (JSON)</button>
  <button onclick="copyTrip()">Copy Trip Summary</button>
</div>

</main>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
/* ===== å¤šèªç³» ===== */
const i18n = {
  en:{title:"Smart Travel Planner",subtitle:"Plan trips, maps, routes & ideas in one place",create:"Create Trip"},
  zh:{title:"æ™ºæ…§æ—…éŠè¦åŠƒ",subtitle:"ä¸€æ¬¡å®Œæˆè¡Œç¨‹ã€åœ°åœ–èˆ‡è·¯ç·š",create:"å»ºç«‹è¡Œç¨‹"},
  ja:{title:"ã‚¹ãƒãƒ¼ãƒˆæ—…è¡Œãƒ—ãƒ©ãƒ³ãƒŠãƒ¼",subtitle:"æ—…ç¨‹ãƒ»åœ°å›³ãƒ»ãƒ«ãƒ¼ãƒˆã‚’ä¸€æ‹¬ç®¡ç†",create:"æ—…è¡Œã‚’ä½œæˆ"}
};
function setLang(l){
  title.innerText=i18n[l].title;
  subtitle.innerText=i18n[l].subtitle;
  createTrip.innerText=i18n[l].create;
}

/* ===== åœ°åœ– ===== */
const map = L.map('map').setView([34.6937,135.5023], 6);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

/* ===== Trip Data ===== */
let trip={ places:[] };

/* ===== AI è¡Œç¨‹ï¼ˆMockï¼ŒçœŸ AI æ”¾ serverlessï¼‰ ===== */
function generateTrip(){
  trip.name=tripName.value;
  trip.dest=destination.value;
  trip.days=[
    "Arrival & city highlights",
    "Cultural sites & local food",
    "Shopping & free exploration"
  ];
  alert("AI itinerary generated (mock)");
}

/* ===== Places & Route ===== */
function addPlace(){
  const p=placeInput.value;
  if(!p) return;
  trip.places.push(p);
  document.getElementById("places").innerHTML+=
    `<div class="place">ğŸ“ ${p}</div>`;
  placeInput.value="";
}

/* ===== Share / Export ===== */
function exportTrip(){
  const data=JSON.stringify(trip,null,2);
  const blob=new Blob([data],{type:"application/json"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="trip.json";
  a.click();
}
function copyTrip(){
  navigator.clipboard.writeText(JSON.stringify(trip));
  alert("Trip copied");
}

/*
=== çœŸ OpenAI APIï¼ˆè«‹æ”¾åœ¨ Cloudflare Worker / Vercelï¼‰===
POST /api/generate
model: gpt-4.1-mini
*/
</script>

</body>
</html>
